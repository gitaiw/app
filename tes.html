<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta http-equiv="x-ua-compatible" content="ie=edge"/>
<title>Demo - Example App Chat</title>
<style>
:root {
  --header-height: 90px;
  --footer-height: 90px;
  --sidebar-width: 260px;
}
* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif; }
html, body { height:100%; background-color:#f6f5fa; color:#000; overflow:hidden; }

.menu-btn {
    position: absolute;
    left: 15px;
    top: calc((var(--header-height) - 40px)/2);
    width: 40px; height: 40px;
    background-color: #fff;
    border-radius: 50%;
    display:flex;
    flex-direction: column;
    justify-content:center;
    align-items:center;
    gap:5px;
    cursor:pointer;
    transition: left 0.3s, background 0.3s, top 0.3s;
    z-index:2;
}
.menu-btn:hover { background-color: rgba(255,255,255,0.2); }
.menu-btn span:nth-child(1) { width: 12px; height:2px; background:#000; }
.menu-btn span:nth-child(2) { width: 20px; height:2px; background:#000; }
.menu-btn.sidebar-open { left: var(--sidebar-width); }

.overlay {
    position: fixed;
    inset:0;
    background:rgba(0,0,0,0.3);
    opacity:0;
    visibility:hidden;
    transition:0.3s;
    z-index:1000;
}
.overlay.active { opacity:1; visibility:visible; }

.sidebar {
    position: fixed;
    top:0;
    left:calc(-1 * var(--sidebar-width));
    width:var(--sidebar-width);
    height:100%;
    background-color:#fff;
    display:flex;
    flex-direction:column;
    transition:left 0.3s;
    z-index:1001;
    overflow-y:auto;
}
.sidebar.active { left:0; }

.sidebar h2 {
    color: #000;
    height: var(--header-height);
    line-height: var(--header-height);
    font-size:1.5rem;
    padding:0 15px;
    border-bottom:1px solid #333;
    text-align: center;
}

.new-chat {
    color: #000;
    padding:12px;
    margin:10px;
    background-color:#fff;
    text-align:left;
    border-radius:5px;
    cursor:pointer;
    font-weight: bold;
}
.new-chat:hover { background-color:transparent;border: 1px solid #000; }

.chat-list { flex:1; overflow-y:auto; padding:0 10px; }

.chat-item {
    color: #000;
    padding:10px;
    margin-bottom:5px;
    background-color:#fff;
    border-radius:5px;
    cursor:pointer;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.chat-item.active { background-color:transparent;border:1px solid #000; }

.chat-item span.close-btn {
    margin-left:10px;
    cursor:pointer;
    color:#ff5555;
    font-weight:bold;
}
.chat-item span.close-btn:hover { color:#ff0000; }

.sidebar-footer {
    height: var(--footer-height);
    line-height: var(--footer-height);
    font-size:0.85rem;
    color:#000;
    text-align:center;
    border-top:1px solid #333;
}

.main {
    position: relative;
    display:flex;
    flex-direction:column;
    height:100%;
    width:100%;
    transition: margin-left 0.3s;
}
.main.shift { margin-left: var(--sidebar-width); }

.header {
    display:flex;
    align-items:center;
    justify-content:center;
    position: relative;
    height: var(--header-height);
    color: #000;
    background-color:#f6f5fa;

    padding:0 20px;
    box-shadow: rgba(17, 12, 46, 0.15) 0px 48px 100px 0px;
}
.header img.logo { height:40px; object-fit:contain; margin:0 auto; }
.header .chat-title { position:absolute; right:20px; font-size:1rem; }

.chat-container {
    flex:1;
    padding:20px 20px calc(var(--footer-height) + 20px);
    overflow-y:auto;
    display:flex;
    flex-direction:column;
}

.message {
    max-width:70%;
    padding:12px 16px;
    border-radius:20px;
    margin-bottom:15px;
}

.user {
    background-color:transparent;
    align-self:flex-end;
    border-radius:20px 5px 20px 20px;
    border: 1px solid #fff;
}

.bot {
    background-color:transparent;
    align-self:flex-start;
    border-radius:5px 20px 20px 20px;
    border: 1px solid #fff;
}

.input-area {
    position:absolute;
    bottom:0;
    left:0;
    right:0;
    height: var(--footer-height);
    display:flex;
    padding:0 20px;
    background-color:#f6f5fa;
    box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 50px;
}

.input-area textarea {
    flex:1;
    margin:12px 0;
    padding:10px 15px;
    border-radius:20px;
    border:none;
    outline:none;
    color:#000;
    background-color:#f6f5fa;
    box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 50px;
    resize: none;
}
#userInput {
  font-size: 16px;
  line-height: 1.4;
}
.input-area button {
    margin:25px 0 12px 8px;
    padding:0 12px;
    height:36px;
    border-radius:18px;
    border:none;
    background-color:#000;
    color:#fff;
    font-size:0.85rem;
    cursor:pointer;
    transition: transform 0.2s ease;
}

.input-area button:hover {
    transform: scale(1.1);
}

/* Animasi fade-in */
@keyframes fadeIn {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

.anim_fadein {
    animation: fadeIn 1s ease-in-out;
}

@media (max-width:600px){
    :root { --sidebar-width: 220px; }
    .menu-btn.sidebar-open { left: var(--sidebar-width); }
    .main.shift { margin-left: var(--sidebar-width); }
    .message { max-width:80%; }
}</style>
</head>
<body class="anim_fadein">

<div class="menu-btn" id="menuBtn"><span></span><span></span></div>
<div class="overlay" id="overlay"></div>

<div class="sidebar" id="sidebar">
    <h2>App Chat</h2>
    <div class="new-chat" onclick="newChat()">+ New Chat</div>
    <div class="chat-list" id="chatList"></div>
    <div class="sidebar-footer">© 2026 aiw.boo</div>
</div>

<div class="main" id="main">
    <div class="header">
        <img src="logo.png" alt="Logo" class="logo">
        <div class="chat-title" id="headerChatTitle">Chat 1</div>
    </div>
    <div class="chat-container" id="chatContainer"></div>
    <div class="input-area">
        <textarea id="userInput" placeholder="Ketik pesan..." rows="3"></textarea>
        <button onclick="sendMessage()">Kirim</button>
    </div>
</div>


<script>
    
let chats = [], currentChatId = null;
const sidebar = document.getElementById('sidebar');
const main = document.getElementById('main');
const overlay = document.getElementById('overlay');
const menuBtn = document.getElementById('menuBtn');

function escapeHtml(str) {
    return str.replace(/[&<>"']/g, function (char) {
        return {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;'
        }[char];
    });
}

function openSidebar(){ sidebar.classList.add('active'); overlay.classList.add('active'); main.classList.add('shift'); menuBtn.classList.add('sidebar-open'); }
function closeSidebar(){ sidebar.classList.remove('active'); overlay.classList.remove('active'); main.classList.remove('shift'); menuBtn.classList.remove('sidebar-open'); }

menuBtn.addEventListener('click', ()=>{ sidebar.classList.contains('active')?closeSidebar():openSidebar(); });
overlay.addEventListener('click', closeSidebar);

let startX=0, startY=0;
document.addEventListener('touchstart', e=>{ startX = e.touches[0].clientX; startY = e.touches[0].clientY; });
document.addEventListener('touchend', e=>{
    const dx = e.changedTouches[0].clientX - startX;
    const dy = e.changedTouches[0].clientY - startY;
    if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy)) { dx > 0 ? openSidebar() : closeSidebar(); }
});

function newChat(){
    const chatId = Date.now();
    chats.push({id: chatId, title: `Chat ${chats.length+1}`, messages: []});
    currentChatId = chatId;
    renderChatList();
    renderChat();
}

function selectChat(id) { currentChatId = id; renderChatList(); renderChat(); }

function deleteChat(id) {
    const index = chats.findIndex(c => c.id === id);
    if (index !== -1) {
        chats.splice(index, 1);
        if (currentChatId === id) currentChatId = chats.length ? chats[0].id : null;
        renderChatList();
        renderChat();
    }
}

function renderChatList() {
    const chatList = document.getElementById('chatList');
    chatList.innerHTML = '';
    chats.forEach(chat => {
        const div = document.createElement('div');
        div.className = 'chat-item' + (chat.id === currentChatId ? ' active' : '');

        const titleSpan = document.createElement('span');
        titleSpan.textContent = chat.title;
        titleSpan.style.flex = '1';
        titleSpan.onclick = () => selectChat(chat.id);

        const closeBtn = document.createElement('span');
        closeBtn.textContent = '×';
        closeBtn.className = 'close-btn';
        closeBtn.onclick = (e) => { e.stopPropagation(); deleteChat(chat.id); };

        div.appendChild(titleSpan);
        div.appendChild(closeBtn);
        chatList.appendChild(div);
    });
}

function renderChat() {
    const container = document.getElementById('chatContainer');
    const headerChat = document.getElementById('headerChatTitle');
    const chat = chats.find(c => c.id === currentChatId);

    if (!chat || !container) {
        if (container) container.innerHTML = '';
        if (headerChat) headerChat.textContent = '';
        return;
    }

    headerChat.textContent = chat.title;
    container.innerHTML = '';

    chat.messages.forEach(msg => {
        const div = document.createElement('div');
        div.className = 'message ' + msg.sender;

        div.innerHTML = msg.text.replace(/\n/g, '<br>');

        container.appendChild(div);
    });

    container.scrollTop = container.scrollHeight;
}

function sendMessage() {
    const input = document.getElementById('userInput');
    if (!input) return;

    let text = input.value.trim();
    if (!text || !currentChatId) return;

    if (text.length > 2000) {
        text = text.slice(0, 2000);
    }

    const sanitizedText = escapeHtml(text);

    const chat = chats.find(c => c.id === currentChatId);
    if (!chat) return;

    chat.messages.push({ sender: 'user', text: sanitizedText });
    input.value = '';
    renderChat();

    const botMessage =
        `DEMO: Kamu mengetik:\n` +
        `<span style="color: blue;">[ </span>` +
        `<span style="color: red;">${sanitizedText}</span>` +
        `<span style="color: blue;"> ]</span>`;

    setTimeout(() => {
        chat.messages.push({ sender: 'bot', text: botMessage });
        renderChat();
    }, 500);
}

document.getElementById('userInput')?.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        return;
    }
});

document.querySelector('button')?.addEventListener('click', sendMessage);

newChat();
</script>


</body>
</html>
